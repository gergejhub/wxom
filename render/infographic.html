<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>WXWI TV Infographic</title>
  <style>
    /* WIZZ-inspired neon HUD palette (magenta + cyan on deep navy) */
    :root{
      --bg0:#050714;
      --bg1:#070a1f;
      --panel:#0b1130;
      --panel2:#0a0f2a;

      --wizz:#c6007e;
      --wizz2:#ff4db8;

      --cyan:#3ef6ff;
      --cyan2: rgba(62,246,255,.38);

      --txt: rgba(240,255,255,.95);
      --muted: rgba(175,210,230,.78);

      --crit:#ff3b7a;
      --high:#ffcf5a;
      --med:#7ac6ff;
      --ok:#3dffcc;

      --safe: 3vw; /* TV safe padding */
      --r: 22px;
    }

    html,body{margin:0;height:100%;background:radial-gradient(1200px 700px at 20% 0%, rgba(198,0,126,.18), transparent 60%),
                                       radial-gradient(1100px 750px at 80% 10%, rgba(62,246,255,.14), transparent 62%),
                                       linear-gradient(180deg, var(--bg0), var(--bg1));
              color:var(--txt); font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; overflow:hidden;}

    /* Subtle grid */
    body:before{
      content:"";
      position:fixed; inset:0;
      background:
        linear-gradient(rgba(62,246,255,.05) 1px, transparent 1px) 0 0/64px 64px,
        linear-gradient(90deg, rgba(62,246,255,.05) 1px, transparent 1px) 0 0/64px 64px;
      mask-image: radial-gradient(700px 520px at 50% 22%, rgba(0,0,0,.9), transparent 70%);
      opacity:.55;
      pointer-events:none;
    }

    .wrap{position:relative; box-sizing:border-box; width:100vw; height:100vh; padding:var(--safe); display:flex; flex-direction:column; gap:2.1vw;}

    /* Header HUD frame */
    .hdr{
      position:relative;
      display:flex; align-items:center; justify-content:space-between; gap:2vw;
      padding:1.1vw 1.4vw;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(11,17,48,.88), rgba(10,15,42,.72));
      border:1px solid rgba(62,246,255,.24);
      box-shadow: 0 0 0 1px rgba(198,0,126,.14), 0 0 42px rgba(62,246,255,.08), 0 0 40px rgba(198,0,126,.06);
      overflow:hidden;
    }
    .hdr:before{
      content:"";
      position:absolute; inset:-2px;
      border-radius: 20px;
      border:2px solid rgba(62,246,255,.20);
      filter: drop-shadow(0 0 18px rgba(62,246,255,.18));
      pointer-events:none;
      opacity:.7;
    }
    .brand{display:flex; align-items:baseline; gap:1.1vw;}
    .wizzMark{
      display:flex; align-items:center; gap:.7vw;
      font-weight:950; letter-spacing:.14em; text-transform:uppercase;
      font-size: clamp(22px, 1.8vw, 70px);
      color: rgba(255,255,255,.92);
      text-shadow: 0 0 22px rgba(198,0,126,.22);
      white-space:nowrap;
    }
    .wizzMark .dot{
      width:.9em; height:.9em; border-radius:999px;
      background: radial-gradient(circle at 35% 30%, rgba(255,255,255,.95), rgba(255,255,255,.1) 35%, rgba(255,255,255,0) 60%),
                  radial-gradient(circle at 40% 35%, rgba(255,77,184,.95), rgba(198,0,126,.95));
      box-shadow: 0 0 18px rgba(198,0,126,.28);
    }
    .title{
      font-weight:900; letter-spacing:.16em; text-transform:uppercase;
      font-size: clamp(18px, 1.35vw, 52px);
      color: rgba(220,250,255,.92);
      opacity:.95;
    }
    .stamp{
      text-align:right; color: var(--muted);
      font-size: clamp(14px, .9vw, 28px);
      line-height:1.15;
      min-width: 22vw;
    }
    .stamp .t{color:rgba(220,250,255,.92); font-weight:800; letter-spacing:.06em;}
    .stamp .s{opacity:.85;}

    /* Affected bases line */
    .bases{
      padding:1.0vw 1.4vw;
      border-radius: 16px;
      border:1px solid rgba(198,0,126,.22);
      background: linear-gradient(180deg, rgba(198,0,126,.08), rgba(11,17,48,.35));
      box-shadow: 0 0 0 1px rgba(62,246,255,.08), inset 0 0 30px rgba(198,0,126,.06);
      display:flex; gap:1.2vw; align-items:flex-start;
    }
    .bases .k{
      font-weight:900; letter-spacing:.12em; text-transform:uppercase;
      font-size: clamp(14px, .9vw, 28px);
      color: rgba(255,255,255,.92);
      white-space:nowrap;
    }
    .bases .v{
      flex:1;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-weight:900;
      font-size: clamp(16px, 1.05vw, 36px);  /* BIG for TV */
      letter-spacing:.08em;
      color: rgba(235,255,255,.96);
      text-shadow: 0 0 16px rgba(62,246,255,.12);
      overflow:hidden;
      display:-webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }

    /* Main grid */
    .main{flex:1; display:grid; grid-template-columns:1fr 1fr; gap:2vw; min-height:0;}

    .section{
      min-height:0;
      display:flex; flex-direction:column; gap:1.6vw;
      padding:1.3vw;
      border-radius: 20px;
      background: linear-gradient(180deg, rgba(11,17,48,.86), rgba(10,15,42,.62));
      border:1px solid rgba(62,246,255,.18);
      box-shadow: 0 0 0 1px rgba(62,246,255,.06), 0 0 42px rgba(62,246,255,.07);
      position:relative; overflow:hidden;
    }
    .section:before{
      content:"";
      position:absolute; inset:-4px;
      border-radius: 24px;
      border:2px solid rgba(62,246,255,.14);
      opacity:.55;
      filter: drop-shadow(0 0 22px rgba(62,246,255,.14));
      pointer-events:none;
    }
    .secHdr{display:flex; justify-content:space-between; align-items:baseline; gap:1vw;}
    .secHdr .h{
      font-weight:950; letter-spacing:.16em; text-transform:uppercase;
      font-size: clamp(18px, 1.25vw, 46px);
    }
    .secHdr .pill{
      font-weight:900; letter-spacing:.12em; text-transform:uppercase;
      font-size: clamp(12px, .8vw, 24px);
      padding:.35em .75em;
      border-radius:999px;
      border:1px solid rgba(62,246,255,.26);
      background: rgba(0,0,0,.16);
      color: rgba(220,250,255,.88);
    }

    .tiles{flex:1; min-height:0; display:grid; grid-template-columns:1fr 1fr; gap:1.4vw;}
    .tile{
      min-height:0;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.12));
      border:1px solid rgba(62,246,255,.16);
      box-shadow: inset 0 0 28px rgba(62,246,255,.06);
      padding:1.05vw 1.1vw;
      display:flex; flex-direction:column; gap:.55vw;
      position:relative;
      overflow:hidden;
    }
    .tile:after{
      content:"";
      position:absolute; left:-40%; top:-55%;
      width: 120%; height: 140%;
      background: radial-gradient(circle at 45% 50%, rgba(198,0,126,.18), transparent 58%);
      opacity:.35;
      transform: rotate(8deg);
      pointer-events:none;
    }
    .tTop{display:flex; justify-content:space-between; align-items:baseline; gap:.8vw; position:relative;}
    .tName{
      font-weight:950; letter-spacing:.10em; text-transform:uppercase;
      font-size: clamp(14px, .9vw, 30px);
      color: rgba(235,255,255,.92);
    }
    .tMeta{
      font-size: clamp(12px, .75vw, 22px);
      color: rgba(175,210,230,.78);
      white-space:nowrap;
    }
    .tVal{
      font-weight:950;
      font-size: clamp(28px, 2.0vw, 78px);
      line-height:1.0;
      letter-spacing:.04em;
      position:relative;
      text-shadow: 0 0 18px rgba(62,246,255,.10);
    }
    .tVal.crit{color:var(--crit); text-shadow:0 0 22px rgba(255,59,122,.20);}
    .tVal.high{color:var(--high); text-shadow:0 0 22px rgba(255,207,90,.16);}
    .tVal.med{color:var(--med); text-shadow:0 0 22px rgba(122,198,255,.16);}
    .tVal.ok{color:var(--ok); text-shadow:0 0 22px rgba(61,255,204,.14);}

    .ex{
      position:relative;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-weight:900;
      font-size: clamp(14px, 0.95vw, 30px); /* BIG IATA */
      letter-spacing:.10em;
      color: rgba(240,255,255,.92);
      opacity:.95;
      line-height:1.15;
      display:-webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow:hidden;
    }
    .ex small{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      font-weight:800;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size: clamp(10px, .7vw, 18px);
      color: rgba(175,210,230,.78);
      margin-right:.6em;
    }

    /* Health panel */
    .healthGrid{display:grid; grid-template-columns:1fr 1fr; gap:1.1vw; margin-top:.4vw;}
    .kv{border-radius:14px; border:1px solid rgba(62,246,255,.14); background: rgba(0,0,0,.14); padding:.8vw 1vw;}
    .kv .k{color:var(--muted); font-weight:900; letter-spacing:.10em; text-transform:uppercase; font-size: clamp(10px, .7vw, 18px);}
    .kv .v{margin-top:.25vw; font-weight:950; font-size: clamp(16px, 1.05vw, 38px); letter-spacing:.04em;}
    .errors{margin-top:1.0vw; color: var(--muted); font-size: clamp(12px, .8vw, 24px); line-height:1.25;}
    .errors b{color:rgba(240,255,255,.92); letter-spacing:.08em; text-transform:uppercase;}

    /* Small footer hint */
    .hint{margin-top:.8vw; color: rgba(175,210,230,.55); font-size: clamp(10px,.7vw,18px); letter-spacing:.06em;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hdr">
      <div class="brand">
        <div class="wizzMark"><span class="dot"></span>WIZZ</div>
        <div class="title">AIR WEATHER INTELLIGENCE — TV BRIEF</div>
      </div>
      <div class="stamp" id="stamp">
        <div class="t">Generated: — UTC</div>
        <div class="s">Source: METAR/TAF + OM advisory layer</div>
      </div>
    </div>

    <div class="bases">
      <div class="k">Affected base airports (now or forecast)</div>
      <div class="v" id="baseLine">—</div>
    </div>

    <div class="main">
      <!-- NOW -->
      <div class="section">
        <div class="secHdr">
          <div class="h">Current alerts (NOW) — Live data</div>
          <div class="pill">METAR</div>
        </div>

        <div class="tiles">
          <div class="tile">
            <div class="tTop"><div class="tName">ALERT CRIT</div><div class="tMeta" id="nowCritMeta">—</div></div>
            <div class="tVal crit" id="nowAlertCrit">0</div>
            <div class="ex" id="nowAlertCritEx"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">METAR CRIT</div><div class="tMeta" id="metCritMeta">—</div></div>
            <div class="tVal crit" id="nowMetCrit">0</div>
            <div class="ex" id="nowMetCritEx"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">Very Low VIS/RVR</div><div class="tMeta">&lt; 300m</div></div>
            <div class="tVal high" id="nowVis300">0</div>
            <div class="ex" id="nowVis300Ex"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">Approach minima</div><div class="tMeta">Below BEST</div></div>
            <div class="tVal med" id="nowBelowBest">0</div>
            <div class="ex" id="nowBelowBestEx"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">Wind gusts</div><div class="tMeta">≥ 25kt</div></div>
            <div class="tVal med" id="nowGust25">0</div>
            <div class="ex" id="nowGust25Ex"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">Snow observed</div><div class="tMeta">METAR</div></div>
            <div class="tVal high" id="nowSnow">0</div>
            <div class="ex" id="nowSnowEx"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">OM advisory</div><div class="tMeta">LVTO</div></div>
            <div class="tVal med" id="nowLvto">0</div>
            <div class="ex" id="nowLvtoEx"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">OM advisory</div><div class="tMeta">TO PROHIB</div></div>
            <div class="tVal crit" id="nowNoOps">0</div>
            <div class="ex" id="nowNoOpsEx"><small>Examples:</small>—</div>
          </div>
        </div>

        <div class="hint">Tip: TV view is optimized for 4K (3840×2160). IATA codes are intentionally oversized for distance readability.</div>
      </div>

      <!-- FORECAST -->
      <div class="section">
        <div class="secHdr">
          <div class="h">Forecasted alerts (FUTURE) — Predictive</div>
          <div class="pill">TAF</div>
        </div>

        <div class="tiles">
          <div class="tile">
            <div class="tTop"><div class="tName">CRITICAL (TAF)</div><div class="tMeta" id="tafCritMeta">—</div></div>
            <div class="tVal crit" id="tafCrit">0</div>
            <div class="ex" id="tafCritEx"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">Very Low VIS/RVR</div><div class="tMeta">&lt; 300m</div></div>
            <div class="tVal high" id="tafVis300">0</div>
            <div class="ex" id="tafVis300Ex"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">Approach minima</div><div class="tMeta">Below BEST</div></div>
            <div class="tVal med" id="tafBelowBest">0</div>
            <div class="ex" id="tafBelowBestEx"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">Approach minima</div><div class="tMeta">Below 2nd</div></div>
            <div class="tVal med" id="tafBelowAlt">0</div>
            <div class="ex" id="tafBelowAltEx"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">Wind gusts</div><div class="tMeta">≥ 25kt</div></div>
            <div class="tVal med" id="tafGust25">0</div>
            <div class="ex" id="tafGust25Ex"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">Snow forecast</div><div class="tMeta">TAF</div></div>
            <div class="tVal high" id="tafSnow">0</div>
            <div class="ex" id="tafSnowEx"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">OM advisory</div><div class="tMeta">LVTO</div></div>
            <div class="tVal med" id="tafLvto">0</div>
            <div class="ex" id="tafLvtoEx"><small>Examples:</small>—</div>
          </div>

          <div class="tile">
            <div class="tTop"><div class="tName">Data pipeline health</div><div class="tMeta" id="healthMeta">—</div></div>
            <div class="healthGrid">
              <div class="kv"><div class="k">Watchlist</div><div class="v" id="wl">—</div></div>
              <div class="kv"><div class="k">Affected bases</div><div class="v" id="baseCount">—</div></div>
              <div class="kv"><div class="k">METAR returned</div><div class="v" id="metarRet">—</div></div>
              <div class="kv"><div class="k">TAF returned</div><div class="v" id="tafRet">—</div></div>
              <div class="kv"><div class="k">Missing METAR</div><div class="v" id="metarMiss">—</div></div>
              <div class="kv"><div class="k">Missing TAF</div><div class="v" id="tafMiss">—</div></div>
            </div>
            <div class="errors" id="errBox"><b>Errors:</b> —</div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
(async () => {
  // Absolute paths (works for GitHub Pages root, custom domain root, and CI local server)
  const STATUS_URL = "/data/status.json";
  const LATEST_URL = "/data/latest.json";
  const BASE_URL   = "/base.txt";

  const $ = (id) => document.getElementById(id);

  function uniq(arr){ return Array.from(new Set(arr)); }
  function topN(arr, n){ return arr.slice(0, n); }
  function fmt(list, n=12){
    const a = topN(list, n);
    return a.length ? a.join(" ") : "—";
  }
  function isSnow(hzArr){
    if (!Array.isArray(hzArr)) return false;
    const set = new Set(hzArr.map(x => String(x).toLowerCase()));
    // include: sn (snow), sngs, shsn, blsn, rASN, etc.
    return ["sn","shsn","snsq","blsn","sg","ice","fzdz","fzra","rASN","rSN"].some(x => set.has(x.toLowerCase())) || Array.from(set).some(x => x.includes("sn"));
  }
  function alertFromScore(score){
    const s = Number(score || 0);
    return s >= 70 ? "CRIT" : s >= 45 ? "HIGH" : s >= 20 ? "MED" : "OK";
  }
  function countMeta(total, bases, out){
    return `${total} airports (${bases} bases, ${out} outstations)`;
  }
  function splitBaseOut(list, baseSet){
    let b=0,o=0;
    for (const c of list){ if (baseSet.has(c)) b++; else o++; }
    return {b,o};
  }

  // Fetch data with safe fallbacks
  let status=null, latest=null, baseTxt="";
  try { status = await (await fetch(STATUS_URL, {cache:"no-store"})).json(); } catch(e) { status=null; }
  try { latest = await (await fetch(LATEST_URL, {cache:"no-store"})).json(); } catch(e) { latest=null; }
  try { baseTxt = await (await fetch(BASE_URL, {cache:"no-store"})).text(); } catch(e) { baseTxt=""; }

  const bases = uniq(baseTxt.split(/\r?\n/).map(s=>s.trim()).filter(Boolean));
  const baseSet = new Set(bases);

  const genAt = status?.generatedAt || latest?.generatedAt || "—";
  $("stamp").innerHTML = `<div class="t">Generated: ${genAt} UTC</div><div class="s">WIZZ palette • TV-optimized • Auto-rendered</div>`;
  $("healthMeta").textContent = genAt !== "—" ? genAt : "—";

  const st = status?.stats || latest?.stats || {};
  $("metarRet").textContent  = String(st.metarReturned ?? "—");
  $("metarMiss").textContent = String(st.missingMetar ?? "—");
  $("tafRet").textContent    = String(st.tafReturned ?? "—");
  $("tafMiss").textContent   = String(st.missingTaf ?? "—");

  const errs = Array.isArray(status?.errors) ? status.errors : (Array.isArray(latest?.errors) ? latest.errors : []);
  $("errBox").innerHTML = `<b>Errors:</b> ${errs.length ? errs.slice(0,6).join(" • ") : "—"}`;

  const stations = Array.isArray(latest?.stations) ? latest.stations : (Array.isArray(latest) ? latest : []);
  $("wl").textContent = String(stations.length || "—");

  // Build collections
  const nowAlertCrit=[], nowMetCrit=[], nowVis300=[], nowBelowBest=[], nowGust25=[], nowSnow=[], nowLvto=[], nowNoOps=[];
  const tafCrit=[], tafVis300=[], tafBelowBest=[], tafBelowAlt=[], tafGust25=[], tafSnow=[], tafLvto=[];
  const affectedBasesSet = new Set();

  for (const s of stations){
    const code = (s.iata || s.icao || "").toString().trim();
    if (!code) continue;

    const metPri = Number(s.metPri || s.met?.score || 0);
    const tafPri = Number(s.tafPri || s.taf?.score || 0);

    const nowA = alertFromScore(metPri);
    const tafA = alertFromScore(tafPri);

    if (nowA !== "OK" && baseSet.has(code)) affectedBasesSet.add(code);
    if (tafA !== "OK" && baseSet.has(code)) affectedBasesSet.add(code);

    // NOW tiles
    if ((s.alert || "").toString().toUpperCase() === "CRIT") nowAlertCrit.push(code);
    if (metPri >= 70 || s.metCrit === true) nowMetCrit.push(code);

    const mVis = Number(s.met?.vis ?? s.visibility_m ?? 99999);
    const mRvr = Number(s.met?.rvrMin ?? s.rvrMinAll ?? 99999);
    if (Math.min(mVis, mRvr) < 300) nowVis300.push(code);

    if (s.minimaNow?.belowBest === true) nowBelowBest.push(code);
    if (Number(s.met?.gustMax ?? 0) >= 25) nowGust25.push(code);
    if (isSnow(s.met?.hz) || isSnow(s.hazards)) nowSnow.push(code);

    if (s.omMet?.lvto === true) nowLvto.push(code);
    if (s.omMet?.noOpsLikely === true) nowNoOps.push(code);

    // TAF tiles
    if (tafPri >= 70 || s.tafCrit === true) tafCrit.push(code);

    const tVis = Number(s.taf?.vis ?? s.taf_visibility_m ?? 99999);
    const tRvr = Number(s.taf?.rvrMin ?? 99999);
    if (Math.min(tVis, tRvr) < 300) tafVis300.push(code);

    if (s.minimaTaf?.belowBest === true) tafBelowBest.push(code);
    if (s.minimaTaf?.belowAlt === true) tafBelowAlt.push(code);

    if (Number(s.taf?.gustMax ?? 0) >= 25) tafGust25.push(code);
    if (isSnow(s.taf?.hz)) tafSnow.push(code);

    if (s.omTaf?.lvto === true) tafLvto.push(code);
  }

  const affectedBases = Array.from(affectedBasesSet).sort();
  $("baseLine").textContent = affectedBases.length ? affectedBases.join("  ") : "—";
  $("baseCount").textContent = String(affectedBases.length);

  // Meta (bases vs outstations)
  const metaNowCrit = splitBaseOut(nowAlertCrit, baseSet);
  $("nowCritMeta").textContent = countMeta(nowAlertCrit.length, metaNowCrit.b, metaNowCrit.o);

  const metaMetCrit = splitBaseOut(nowMetCrit, baseSet);
  $("metCritMeta").textContent = countMeta(nowMetCrit.length, metaMetCrit.b, metaMetCrit.o);

  const metaTafCrit = splitBaseOut(tafCrit, baseSet);
  $("tafCritMeta").textContent = countMeta(tafCrit.length, metaTafCrit.b, metaTafCrit.o);

  // Fill NOW
  $("nowAlertCrit").textContent = String(nowAlertCrit.length);
  $("nowAlertCritEx").innerHTML = `<small>Examples:</small>${fmt(nowAlertCrit.sort())}`;

  $("nowMetCrit").textContent = String(nowMetCrit.length);
  $("nowMetCritEx").innerHTML = `<small>Examples:</small>${fmt(nowMetCrit.sort())}`;

  $("nowVis300").textContent = String(nowVis300.length);
  $("nowVis300Ex").innerHTML = `<small>Examples:</small>${fmt(nowVis300.sort())}`;

  $("nowBelowBest").textContent = String(nowBelowBest.length);
  $("nowBelowBestEx").innerHTML = `<small>Examples:</small>${fmt(nowBelowBest.sort())}`;

  $("nowGust25").textContent = String(nowGust25.length);
  $("nowGust25Ex").innerHTML = `<small>Examples:</small>${fmt(nowGust25.sort())}`;

  $("nowSnow").textContent = String(nowSnow.length);
  $("nowSnowEx").innerHTML = `<small>Examples:</small>${fmt(nowSnow.sort())}`;

  $("nowLvto").textContent = String(nowLvto.length);
  $("nowLvtoEx").innerHTML = `<small>Examples:</small>${fmt(nowLvto.sort())}`;

  $("nowNoOps").textContent = String(nowNoOps.length);
  $("nowNoOpsEx").innerHTML = `<small>Examples:</small>${fmt(nowNoOps.sort())}`;

  // Fill TAF
  $("tafCrit").textContent = String(tafCrit.length);
  $("tafCritEx").innerHTML = `<small>Examples:</small>${fmt(tafCrit.sort())}`;

  $("tafVis300").textContent = String(tafVis300.length);
  $("tafVis300Ex").innerHTML = `<small>Examples:</small>${fmt(tafVis300.sort())}`;

  $("tafBelowBest").textContent = String(tafBelowBest.length);
  $("tafBelowBestEx").innerHTML = `<small>Examples:</small>${fmt(tafBelowBest.sort())}`;

  $("tafBelowAlt").textContent = String(tafBelowAlt.length);
  $("tafBelowAltEx").innerHTML = `<small>Examples:</small>${fmt(tafBelowAlt.sort())}`;

  $("tafGust25").textContent = String(tafGust25.length);
  $("tafGust25Ex").innerHTML = `<small>Examples:</small>${fmt(tafGust25.sort())}`;

  $("tafSnow").textContent = String(tafSnow.length);
  $("tafSnowEx").innerHTML = `<small>Examples:</small>${fmt(tafSnow.sort())}`;

  $("tafLvto").textContent = String(tafLvto.length);
  $("tafLvtoEx").innerHTML = `<small>Examples:</small>${fmt(tafLvto.sort())}`;

  // signal for Puppeteer
  window.__RENDER_READY__ = true;
})();
</script>
</body>
</html>
